import { beforeAll, describe, expect, it } from "vitest";
import { audio, boot, loader } from "../src/index.js";

describe("loader", () => {
	let audioURI;
	let imgURI;

	beforeAll(async () => {
		audioURI =
			"data:audio/mpeg;base64,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";

		imgURI =
			"data:image/png;base64,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";

		boot();
		audio.init("mp3,ogg");
	});

	it("configure the preloader", async () => {
		loader.setOptions({ crossOrigin: "anonymous" });
		expect(loader.crossOrigin === "anonymous").toEqual(true);
	});

	it("should load supported audio assets", async () => {
		expect(
			new Promise((resolve, reject) => {
				loader.load(
					{
						name: "silence",
						type: "audio",
						src: "/data/sfx/",
					},
					() => {
						resolve(true);
					},
					() => {
						reject(new Error("Failed to load `rect.png`"));
					},
				);
			}),
		).resolves.toBe(true);
	});

	it("should load base64 encoded audio assets", async () => {
		expect(
			new Promise((resolve, reject) => {
				loader.load(
					{
						name: "silence2",
						type: "audio",
						src: audioURI,
					},
					() => {
						resolve(true);
					},
					() => {
						reject(new Error("Failed to load `rect.png`"));
					},
				);
			}),
		).resolves.toBe(true);
	});

	it("should load image asset", async () => {
		expect(
			new Promise((resolve, reject) => {
				loader.load(
					{
						name: "testimage",
						type: "image",
						src: "/data/img/rect.png",
					},
					() => {
						resolve(loader.getImage("testimage") !== null);
					},
					() => {
						reject(new Error("Failed to load `rect.png`"));
					},
				);
			}),
		).resolves.toBe(true);
	});

	it("should load base64 encoded image asset", async () => {
		expect(
			new Promise((resolve, reject) => {
				loader.load(
					{
						name: "testimage2",
						type: "image",
						src: imgURI,
					},
					() => {
						resolve(loader.getImage("testimage2") !== null);
					},
					() => {
						reject(new Error("Failed to load `rect.png`"));
					},
				);
			}),
		).resolves.toBe(true);
	});

	it("should unload image asset", async () => {
		loader.unload({ name: "testimage", type: "image" });
		loader.unload({ name: "testimage2", type: "image" });

		expect(
			loader.getImage("testimage") === null &&
				loader.getImage("testimage2") === null,
		).toEqual(true);
	});
});
